{
  "get_collection": "select * from (select available_works_t6.*, ntile(101) over (order by price) price_tile, ntile(101) over (order by size) size_tile from (select available_works_t5.*, max(AWHP.list_price) price from (select available_works_t4.*, if(thumb_url is null, 'https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcSG8YmmaJFVPwxwNtVDK0ASJ1IUA7IXPjp0_iWsxG6uFVOZ4SSa', concat('https://www.thecommercialgallery.com', thumb_url)) thumb_url, if(image_url is null, 'https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcSG8YmmaJFVPwxwNtVDK0ASJ1IUA7IXPjp0_iWsxG6uFVOZ4SSa', concat('https://www.thecommercialgallery.com', image_url)) image_url from (select available_works_t3.*, AWP.title, AWP.year_from year, AWP.profile_img, AWP.width * AWP.height size from (select available_works_t2.*, artwork_profile_id, artwork_id from (select available_works_t1.*, first_name, last_name from (select collection_id, artist_id from collections C inner join collections_artists CA on C.id = CA.collection_id where C.title = '%PARAMS%') available_works_t1 inner join artists A on available_works_t1.artist_id = A.id where A.is_public = 1) available_works_t2 inner join collections_artworks CAW on available_works_t2.collection_id = CAW.collection_id) available_works_t3 inner join artwork_profiles AWP on available_works_t3.artwork_profile_id = AWP.id ) available_works_t4 left join files_images FIMG on available_works_t4.profile_img = FIMG.file_manage_id) available_works_t5 left join artwork_historic_prices AWHP on available_works_t5.artwork_id = AWHP.artwork_id group by first_name, last_name, available_works_t5.artist_id, available_works_t5.collection_id, available_works_t5.artwork_profile_id, available_works_t5.artwork_id, available_works_t5.title, available_works_t5.year, available_works_t5.size, thumb_url, image_url) available_works_t6) available_works_t7",
  "filter_types": "left join artworkprofiles_types AWPT on AWPT.artwork_profile_id = available_works_t7.artwork_profile_id where type_id in (%PARAMS%) group by AWPT.id, collection_id, artist_id, first_name, last_name, available_works_t7.artwork_profile_id, artwork_id, title, year, profile_img, size, thumb_url, image_url, price;",
  "filter_price": "where price_tile BETWEEN %PARAMS% and %PARAMS%;",
  "filter_scale": "where size_tile BETWEEN %PARAMS% and %PARAMS%;",
  "filter_artists": "where artist_id in %PARAMS%;",
  "get_artwork": "select artwork_t1.*, concat('https://www.thecommercialgallery.com', thumb_url) thumb_url, concat('https://www.thecommercialgallery.com', image_url) image_url, FM.caption img_caption, FI.width img_width, FI.height img_height, FM.name img_name from (select height, width, depth, non_standard_dimensions , year_from year, AWP.description, edition_caption, collection_caption, title, medium_descriptive, first_name, last_name, artist_id, AWP.id artwork_profile_id from artwork_profiles AWP inner join artists A on A.id = AWP.artist_id where AWP.id = %PARAMS%) artwork_t1 left join artworkprofiles_files AWPF on artwork_t1.artwork_profile_id = AWPF.artwork_profile_id left join file_managed FM on AWPF.file_id = FM.id left join files_images FI on FM.id = FI.file_manage_id",
  "get_names":"select distinct artists.is_public, artists.id, last_name, first_name from collections, collections_artists, artists where artists.id = collections_artists.artist_id and collections.id = collections_artists.collection_id and artists.is_public = 1 and collections.title = 'Selected available works'",
  "get_types":"select distinct types.id, types.description from  types, collections, collections_artworks, artwork_profiles, artworkprofiles_types where artwork_profiles.id = collections_artworks.artwork_profile_id and artwork_profiles.id = artworkprofiles_types.artwork_profile_id and artworkprofiles_types.type_id = types.id and collections.id = collections_artworks.collection_id and collections.title = 'Selected available works'",
  "get_news": "select * from news order by news_date desc limit 5;"

}
